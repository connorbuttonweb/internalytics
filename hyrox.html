<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HYROX — Connor Button</title>
  <link rel="stylesheet" href="main.css" />
  <link rel="icon" type="image/png" href="images/favicon.png" />
  <style>
    .page-title { margin: 0; }
    .page-subtitle { margin: 6px 0 18px; color: var(--muted); }
    .title-row{ display:flex; align-items:center; gap:12px; flex-wrap:wrap; }
    .title-row a.logo-link img{ height:56px; width:auto; border-radius:10px; box-shadow: var(--shadow); }

    /* keep it simple: three big paragraphs + one gallery */
    .story.card p{ margin:0 0 12px; color:#222; }
    .splits{
      display:grid; grid-template-columns: repeat(2, minmax(220px, 1fr)); gap:8px 16px;
      margin:8px 0 2px; font-size:0.98rem;
    }
    .splits div{ display:flex; justify-content:space-between; border-bottom:1px dashed var(--line); padding:6px 0; }
    .splits .label{ opacity:.9; }
    .splits .time{ font-weight:600; }

    /* gallery uses your global grid */
    .gallery figure{ position:relative; cursor:zoom-in; border-radius:var(--radius); overflow:hidden; }
    /* lightbox (same as portfolio) */
    .lightbox { position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.9); z-index:9999; }
    .lightbox.open{ display:flex; }
    .lightbox-content{ position:relative; max-width:95vw; max-height:92vh; width:min(1100px,95vw); display:flex; align-items:center; justify-content:center; }
    .lightbox img, .lightbox video{ max-width:100%; max-height:92vh; width:auto; height:auto; border-radius:12px; outline:1px solid rgba(255,255,255,.15); background:#000; }
    .lightbox .close, .lightbox .prev, .lightbox .next{ position:absolute; top:50%; transform:translateY(-50%); border:0; background:rgba(255,255,255,.12); color:#fff; padding:.65rem .8rem; border-radius:10px; cursor:pointer; font-weight:700; }
    .lightbox .close{ top:2%; right:2%; transform:none; } .lightbox .prev{ left:1.2%; } .lightbox .next{ right:1.2%; }
    .lightbox .close:hover, .lightbox .prev:hover, .lightbox .next:hover{ background:rgba(255,255,255,.22); }
    .caption{ margin-top:.75rem; text-align:center; color:#f0f0f0; font-size:.95rem; opacity:.85; max-width:min(900px,90vw); }
  </style>
</head>

<body>
  <div class="back-btn">
    <a href="homeport.html">← Back to Portfolios</a>
  </div>

  <section class="section">
    <div class="container">

      <!-- Title + logo linking to HYROX -->
      <div class="title-row">
        <a class="logo-link hyrox-logo" href="https://www.hyresult.com/event/s8-2025-toronto" target="_blank" rel="noopener" aria-label="Visit HYROX website">
          <!-- using your signage shot as the 'logo' thumbnail -->
          <img src="images/hyrox/logo.png" alt="HYROX" />
        </a>
        <h1 class="page-title"> — Toronto [October 4th, 2025]</h1>
      </div>
      <p class="page-subtitle">World Series of Fitness Racing • Enercare Centre, Exhibition Place • Solo division</p>

      <!-- THREE-PARAGRAPH STORY -->
      <article class="story card">
        <p><strong>Lead-up.</strong> Through the summer I was putting in long days as a landscape-construction foreman and then training weekly on wednesdays after shift — 5km low and slow run, f45 hybrid training. The goal was consistency: learn the machines, learn the stations, and show up prepared even when the day was tough and the body was already tired. That discipline was the decider heading into race day, considering the decision to finish is less about your physical strength but your mental fortitude.</p>

        <p><strong>Race.</strong> HYROX is eight 1&nbsp;km runs broken up by eight stations. I kept the opening pace relaxed and focused on tidy transitions. Here are my station times from Toronto:</p>

        <!-- compact splits pulled from HYRESULT -->
        <div class="splits" aria-label="HYROX station split times">
          <div><span class="label">SkiErg (1000m)</span><span class="time">4:51</span></div>
          <div><span class="label">Sled Push (100m, 152kg)</span><span class="time">2:39</span></div>
          <div><span class="label">Sled Pull (100m, 103kg)</span><span class="time">4:54</span></div>
          <div><span class="label">Burpee Broad Jumps (80m)</span><span class="time">6:27</span></div>
          <div><span class="label">Row (1000m)</span><span class="time">5:03</span></div>
          <div><span class="label">Farmer’s Carry (200m, 2x24kg)</span><span class="time">2:33</span></div>
          <div><span class="label">Sandbag Lunges (100m, 20kg)</span><span class="time">6:08</span></div>
          <div><span class="label">Wall Balls (100, 6kg)</span><span class="time">7:52</span></div>
        </div>
        <p class="small">Full analytics + lap breakdown: <a href="https://www.hyresult.com/result/LR3MS4JI3DB3D9?tab=splits" target="_blank" rel="noopener">HYRESULT</a>. Official finish time: <strong>1:35:14</strong></p>

        <p><strong>Takeaways.</strong> Pacing the runs kept me steady for the heavy stations but my pace can improve to stay below 6min/km, but consistent running without breaks allowed for clean Roxzone entries/exits saving free seconds. The big takeaways for next time: better training on erg machines, shorter rests on burpees, and a heck of a lot more thigh training because those lunges were the end of me. The training for this race was slightly last minute with only one session a week after my long consturction schedule. To prepare for next year I am moving to two hybrid training sessions per week with a focus on rowing and legs, a weekly 5km run, and continual athletic therapy and strength work aimed at solving my carpel tunnel syndrome.</p>
      </article>

      <!-- Single gallery that supports your lightbox -->
      <div class="gallery" data-gallery="hyrox" style="margin-top:16px;">
        <figure data-type="image" data-src="images/hyrox/erg.jpg">
          <img src="images/hyrox/erg.jpg" loading="lazy" decoding="async" />
        </figure>
        <figure data-type="image" data-src="images/hyrox/farmer.jpg">
          <img src="images/hyrox/farmer.jpg" loading="lazy" decoding="async" />
        </figure>
        <figure data-type="image" data-src="images/hyrox/lunge.jpg">
          <img src="images/hyrox/lunge.jpg" loading="lazy" decoding="async" />
        </figure>
        <figure data-type="image" data-src="images/hyrox/run.jpg">
          <img src="images/hyrox/run.jpg" loading="lazy" decoding="async" />
        </figure>
        <figure data-type="image" data-src="images/hyrox/sled.jpg">
          <img src="images/hyrox/sled.jpg" loading="lazy" decoding="async" />
        </figure>
        <figure data-type="image" data-src="images/hyrox/time.jpg">
          <img src="images/hyrox/time.jpg" loading="lazy" decoding="async" />
        </figure>
      </div>
    </div>
  </section>

  <!-- Lightbox root -->
  <div class="lightbox" id="lightbox" aria-modal="true" role="dialog" aria-label="Media viewer">
    <div class="lightbox-content" id="lbContent" tabindex="0" aria-live="polite"></div>
    <button class="close" id="lbClose" aria-label="Close (Esc)">✕</button>
    <button class="prev" id="lbPrev" aria-label="Previous (←)">⬅</button>
    <button class="next" id="lbNext" aria-label="Next (→)">➡</button>
    <p class="caption" id="lbCaption"></p>
  </div>

  <!-- Performance + Lightbox JS -->
  <script>
    // lazy priorities
    (function () {
      const imgs = Array.from(document.querySelectorAll('img'));
      imgs.forEach((img, i) => {
        if (i < 2) { img.loading = 'eager'; img.fetchPriority = 'high'; }
        else { img.loading = 'lazy'; img.decoding = 'async'; img.fetchPriority = 'low'; }
      });
      const vids = document.querySelectorAll('video');
      vids.forEach(v => { v.preload = 'none'; });
      const iv = new IntersectionObserver((entries) => {
        entries.forEach(({isIntersecting, target:v}) => { if (!isIntersecting && !v.paused) v.pause(); });
      }, { threshold: 0.1 });
      vids.forEach(v => iv.observe(v));
    })();

    // lightbox (same logic as portfolio)
    (function(){
      const galleries = Array.from(document.querySelectorAll('.gallery'));
      const lightbox = document.getElementById('lightbox');
      const lbContent = document.getElementById('lbContent');
      const lbCaption = document.getElementById('lbCaption');
      const btnPrev = document.getElementById('lbPrev');
      const btnNext = document.getElementById('lbNext');
      const btnClose = document.getElementById('lbClose');

      const media = [];
      galleries.forEach(g => {
        const tiles = Array.from(g.querySelectorAll('figure'));
        tiles.forEach(t => media.push({
          el: t,
          gallery: g.dataset.gallery || 'gallery',
          type: t.dataset.type || (t.querySelector('video') ? 'video' : 'image'),
          src: (t.dataset.src
                  ? t.dataset.src.split(',').map(s => s.trim()).filter(Boolean)
                  : [t.querySelector('img,video')?.getAttribute('src')].filter(Boolean)),
          poster: t.dataset.poster || t.querySelector('video')?.getAttribute('poster') || '',
          caption: t.dataset.caption || t.querySelector('img')?.getAttribute('alt') || ''
        }));
      });

      let currentIndex = -1;

      function stopActiveVideo(){
        const v = lbContent.querySelector('video');
        if (v){
          try { v.pause(); } catch(_) {}
          v.removeAttribute('src');
          v.querySelectorAll('source').forEach(s => s.remove());
          v.load();
        }
      }
      function renderMedia(item){
        stopActiveVideo();
        lbContent.innerHTML = '';
        if (item.type === 'video'){
          const v = document.createElement('video');
          v.controls = true; v.playsInline = true; v.preload = 'metadata';
          if (item.poster) v.poster = item.poster;
          (Array.isArray(item.src) ? item.src : [item.src]).forEach(src => {
            const s = document.createElement('source');
            s.src = src; s.type = src.endsWith('.webm') ? 'video/webm' : 'video/mp4';
            v.appendChild(s);
          });
          lbContent.appendChild(v); v.muted = true; v.play().catch(()=>{});
        } else {
          const img = document.createElement('img');
          img.src = Array.isArray(item.src) ? item.src[0] : item.src;
          img.alt = item.caption || 'Expanded image';
          lbContent.appendChild(img);
        }
        lbCaption.textContent = item.caption || '';
      }
      function openAt(i){ if(i<0||i>=media.length) return; renderMedia(media[i]); currentIndex=i; lightbox.classList.add('open'); document.body.style.overflow='hidden'; lbContent.focus(); }
      function close(){ lightbox.classList.remove('open'); document.body.style.overflow=''; stopActiveVideo(); lbContent.innerHTML=''; lbCaption.textContent=''; }
      function prev(){ stopActiveVideo(); openAt((currentIndex - 1 + media.length) % media.length); }
      function next(){ stopActiveVideo(); openAt((currentIndex + 1) % media.length); }

      media.forEach((m, idx) => {
        m.el.addEventListener('click', () => openAt(idx));
        m.el.setAttribute('tabindex', '0');
        m.el.setAttribute('role', 'button');
        m.el.addEventListener('keydown', (e) => {
          if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); openAt(idx); }
        });
      });
      btnClose.addEventListener('click', close);
      btnPrev.addEventListener('click', prev);
      btnNext.addEventListener('click', next);
      lightbox.addEventListener('click', (e) => { if(e.target === lightbox) close(); });
      document.addEventListener('keydown', (e) => {
        if(!lightbox.classList.contains('open')) return;
        if(e.key === 'Escape') close();
        else if(e.key === 'ArrowLeft') prev();
        else if(e.key === 'ArrowRight') next();
      });

      // swipe (mobile)
      let touchStartX = null;
      lightbox.addEventListener('touchstart', e => { touchStartX = e.changedTouches[0].clientX; }, { passive:true });
      lightbox.addEventListener('touchend', e => {
        if (touchStartX === null) return;
        const dx = e.changedTouches[0].clientX - touchStartX;
        if (Math.abs(dx) > 50) { dx > 0 ? prev() : next(); }
        touchStartX = null;
      }, { passive:true });
    })();
  </script>
</body>
</html>