<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Internalytics — Recruiting, decoded.</title>
  <link rel="stylesheet" href="main.css" />
  <meta name="description" content="Analyze internship cycles, uncover timing patterns, and act with insight. Internalytics focuses on insight over listings." />
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container inner">
      <a href="index.html" class="row" style="gap:.6rem;text-decoration:none">
        <img src="images/logo.png" alt="Internalytics mark" width="28" height="28" style="border-radius:6px;box-shadow:var(--shadow-sm)" />
        <strong style="color:var(--text-strong)">Internalytics</strong>
      </a>
      <nav class="nav" aria-label="Primary">
        <a href="radar.html">Opportunity Radar</a>
        <a href="cycle.html">Cycle Intelligence</a>
        <a href="playbooks.html">Playbooks</a>
        <a href="networking.html">Networking Hub</a>
        <a href="tracker.html">Tracker</a>
        <a href="about.html">About</a>
        <a class="cta" href="account.html">Sign in</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="container content">
      <div class="row" style="gap:1rem;align-items:center">
        <img src="images/logo.png" alt="Internalytics logo" width="64" height="64" style="border-radius:16px;box-shadow:var(--shadow-md)" />
        <div>
          <h1>Recruiting, decoded.</h1>
          <p>Analyze internship cycles, uncover timing patterns, and act with insight across Finance, Accounting, Consulting, and Real Estate.</p>
        </div>
      </div>
      <div class="actions">
        <a class="btn" href="#cycle-intelligence">See Timeline</a>
        <a class="btn secondary" href="radar.html">Explore Radar</a>
        <a class="btn ghost" href="account.html">Sign in</a>
      </div>
    </div>
  </section>

  <!-- Snapshot Analytics Bar -->
  <section class="section">
    <div class="container">
      <div class="analytics-bar" role="region" aria-label="Snapshot KPIs">
        <div class="kpi">
          <div class="value" id="kpi-open">42</div>
          <div class="label">Open applications now</div>
        </div>
        <div class="kpi">
          <div class="value" id="kpi-interview">18</div>
          <div class="label">Interview windows active</div>
        </div>
        <div class="kpi">
          <div class="value" id="kpi-offer">6</div>
          <div class="label">Offer waves this week</div>
        </div>
        <div class="kpi">
          <div class="value" id="kpi-updated">Today</div>
          <div class="label">Last data refresh</div>
        </div>
      </div>
    </div>
  </section>

 <!-- Cycle Intelligence Desktop Scrollable Calendar -->
<section id="cycle-intelligence" class="section headroom">
  <div class="container">
    <div class="row" style="justify-content:space-between;align-items:center;">
      <h2 class="m-0">Cycle Intelligence — Timeline</h2>
      <div>
        <button id="prevBtn" class="btn ghost small">←</button>
        <button id="nextBtn" class="btn ghost small">→</button>
      </div>
    </div>
    <p class="caption mt-2">Interactive recruiting timeline by discipline. Click and drag to explore months.</p>

    <div class="calendar-container mt-4">
      <div class="calendar-fixed-col" id="disciplineLabels"></div>
      <div class="calendar-scroll-area" id="calendarScroll">
        <div class="calendar-grid" id="calendarGrid"></div>
        <div class="today-line" id="todayLine"></div>
      </div>
    </div>
  </div>
</section>

<style>
/* Layout */
.calendar-container {
  display: flex;
  position: relative;
  height: auto;
  border: 1px solid var(--border-color, #ddd);
  border-radius: 12px;
  overflow: hidden;
}

.calendar-fixed-col {
  flex: 0 0 160px;
  background: var(--bg-subtle, #fafafa);
  border-right: 1px solid #ddd;
  display: flex;
  flex-direction: column;
  z-index: 5;
}

.calendar-fixed-col .discipline {
  font-weight: 600;
  padding: 12px;
  border-bottom: 1px solid #eee;
}

.calendar-scroll-area {
  position: relative;
  flex: 1;
  overflow: hidden; /* hides scrollbar */
  cursor: grab;
}

.calendar-scroll-area.dragging {
  cursor: grabbing;
}

.calendar-grid {
  display: grid;
  grid-template-rows: auto;
  width: 2400px; /* base width, gives horizontal space */
  position: relative;
}

.calendar-month-header {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  text-align: center;
  font-weight: 600;
  background: var(--bg-subtle, #f7f7f7);
  padding: 0.5rem 0;
  border-bottom: 1px solid #ddd;
}

.calendar-row {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  align-items: center;
  height: 42px;
  border-bottom: 1px solid #eee;
  position: relative;
}

.highlight {
  position: absolute;
  height: 36px;
  background: rgba(0, 200, 0, 0.25);
  border-radius: 4px;
  top: 3px;
}

.today-line {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 2px;
  background: red;
  z-index: 10;
  pointer-events: none;
}
</style>

<script>
// ---------- Config ----------
const calendarGrid = document.getElementById("calendarGrid");
const calendarScroll = document.getElementById("calendarScroll");
const disciplineLabels = document.getElementById("disciplineLabels");
const todayLine = document.getElementById("todayLine");

const MONTH_NAMES = [
  "Jan", "Feb", "Mar", "Apr", "May", "Jun",
  "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
];

const cycleRanges = [
  { discipline: "Finance",     ranges: [{ start: "2025-09-01", end: "2025-11-15" }] },
  { discipline: "Accounting",  ranges: [{ start: "2025-07-01", end: "2025-09-30" }] },
  { discipline: "Consulting",  ranges: [{ start: "2025-08-15", end: "2025-10-31" }] },
  { discipline: "Real Estate", ranges: [{ start: "2025-09-10", end: "2025-12-05" }] }
];

// ---------- Rendering ----------
function renderCalendar() {
  calendarGrid.innerHTML = "";
  disciplineLabels.innerHTML = "";

  // Header row for months
  const header = document.createElement("div");
  header.className = "calendar-month-header";
  MONTH_NAMES.forEach(month => {
    const cell = document.createElement("div");
    cell.textContent = month;
    header.appendChild(cell);
  });
  calendarGrid.appendChild(header);

  const startOfYear = new Date(new Date().getFullYear(), 0, 1);
  const endOfYear = new Date(new Date().getFullYear(), 11, 31);
  const totalMs = endOfYear - startOfYear;

  // Rows for each discipline
  cycleRanges.forEach(item => {
    const row = document.createElement("div");
    row.className = "calendar-row";

    // Create empty grid cells
    MONTH_NAMES.forEach(() => {
      const cell = document.createElement("div");
      row.appendChild(cell);
    });

    // Create discipline label (fixed column)
    const label = document.createElement("div");
    label.className = "discipline";
    label.textContent = item.discipline;
    disciplineLabels.appendChild(label);

    // Add highlights for internship cycles
    item.ranges.forEach(r => {
      const s = new Date(r.start);
      const e = new Date(r.end);
      const startRatio = (s - startOfYear) / totalMs;
      const endRatio = (e - startOfYear) / totalMs;
      const highlight = document.createElement("div");
      highlight.className = "highlight";
      highlight.style.left = `${startRatio * 100}%`;
      highlight.style.width = `${(endRatio - startRatio) * 100}%`;
      row.appendChild(highlight);
    });

    calendarGrid.appendChild(row);
  });

  updateTodayLine();
}

// ---------- Today Line ----------
function updateTodayLine() {
  const now = new Date();
  const startOfYear = new Date(now.getFullYear(), 0, 1);
  const endOfYear = new Date(now.getFullYear(), 11, 31);
  const totalMs = endOfYear - startOfYear;
  const ratio = (now - startOfYear) / totalMs;
  const totalWidth = calendarGrid.offsetWidth;
  todayLine.style.left = `${ratio * totalWidth}px`;
}

// ---------- Scroll / Drag Support ----------
let isDown = false;
let startX;
let scrollLeft;

calendarScroll.addEventListener('mousedown', (e) => {
  isDown = true;
  calendarScroll.classList.add('dragging');
  startX = e.pageX - calendarScroll.offsetLeft;
  scrollLeft = calendarScroll.scrollLeft;
});

calendarScroll.addEventListener('mouseleave', () => {
  isDown = false;
  calendarScroll.classList.remove('dragging');
});

calendarScroll.addEventListener('mouseup', () => {
  isDown = false;
  calendarScroll.classList.remove('dragging');
});

calendarScroll.addEventListener('mousemove', (e) => {
  if (!isDown) return;
  e.preventDefault();
  const x = e.pageX - calendarScroll.offsetLeft;
  const walk = (x - startX);
  calendarScroll.scrollLeft = scrollLeft - walk;
});

// ---------- Arrow Button Scrolling ----------
document.getElementById("prevBtn").addEventListener("click", () => {
  calendarScroll.scrollBy({ left: -300, behavior: "smooth" });
});
document.getElementById("nextBtn").addEventListener("click", () => {
  calendarScroll.scrollBy({ left: 300, behavior: "smooth" });
});

// ---------- Initialize ----------
renderCalendar();
setInterval(updateTodayLine, 60000); // refresh every minute
</script>

  <!-- Profession Feature Grid -->
  <section class="section">
    <div class="container grid cols-4">
      <a class="card lift feature-card finance" href="radar.html?profession=finance">
        <div class="title">Finance</div>
        <div class="meta">IB, S&T, AM timelines</div>
      </a>
      <a class="card lift feature-card accounting" href="radar.html?profession=accounting">
        <div class="title">Accounting</div>
        <div class="meta">Assurance & Tax cycles</div>
      </a>
      <a class="card lift feature-card consulting" href="radar.html?profession=consulting">
        <div class="title">Consulting</div>
        <div class="meta">Strategy & Ops recruiting</div>
      </a>
      <a class="card lift feature-card realestate" href="radar.html?profession=realestate">
        <div class="title">Real Estate</div>
        <div class="meta">Investment & Dev tracks</div>
      </a>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container inner">
      <small>Built for students who think in data.</small>
      <small>© <span id="year"></span> Internalytics</small>
    </div>
  </footer>

  <!-- Minimal JS: JSON-driven CycleMap preview (MVP, static data) -->
  <script>
    // Example static JSON dataset for the preview (Phase 1 / MVP)
    const cycleData = [
      { role: "Finance — Bulge Bracket", phases: [
        { type: "open", start: 5, end: 25 },      // day-of-year percentages (0–100)
        { type: "interview", start: 26, end: 45 },
        { type: "offer", start: 46, end: 55 },
      ]},
      { role: "Accounting — Big 4", phases: [
        { type: "open", start: 10, end: 30 },
        { type: "interview", start: 34, end: 52 },
        { type: "offer", start: 58, end: 65 },
      ]},
      { role: "Consulting — MBB/Boutique", phases: [
        { type: "open", start: 15, end: 35 },
        { type: "interview", start: 40, end: 60 },
        { type: "offer", start: 64, end: 75 },
      ]},
      { role: "Real Estate — IM/Dev", phases: [
        { type: "open", start: 20, end: 38 },
        { type: "interview", start: 42, end: 58 },
        { type: "offer", start: 63, end: 72 },
      ]},
    ];

    const rowsHost = document.getElementById("cycle-rows");

    function renderCycleRows(data) {
      rowsHost.innerHTML = "";
      data.forEach(item => {
        const row = document.createElement("div");
        row.className = "row";
        const role = document.createElement("div");
        role.className = "role";
        role.textContent = item.role;
        const lane = document.createElement("div");
        lane.className = "lane";
        // add phases
        item.phases.forEach(p => {
          const el = document.createElement("div");
          el.className = "phase " + p.type;
          el.style.left = p.start + "%";
          el.style.width = (p.end - p.start) + "%";
          el.title = p.type.toUpperCase() + " • " + p.start + "%–" + p.end + "%";
          el.setAttribute("aria-label", el.title);
          lane.appendChild(el);
        });
        row.appendChild(role);
        row.appendChild(lane);
        rowsHost.appendChild(row);
      });
    }
    renderCycleRows(cycleData);

    // Year in footer
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
