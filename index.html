<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Internalytics — Recruiting, decoded.</title>
  <link rel="stylesheet" href="main.css" />
  <meta name="description" content="Analyze internship cycles, uncover timing patterns, and act with insight. Internalytics focuses on insight over listings." />
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container inner">
      <a href="index.html" class="row" style="gap:.6rem;text-decoration:none">
        <img src="images/logo.png" alt="Internalytics mark" width="28" height="28" style="border-radius:6px;box-shadow:var(--shadow-sm)" />
        <strong style="color:var(--text-strong)">Internalytics</strong>
      </a>
      <nav class="nav" aria-label="Primary">
        <a href="radar.html">Opportunity Radar</a>
        <a href="cycle.html">Cycle Intelligence</a>
        <a href="playbooks.html">Playbooks</a>
        <a href="networking.html">Networking Hub</a>
        <a href="tracker.html">Tracker</a>
        <a href="about.html">About</a>
        <a class="cta" href="account.html">Sign in</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="container content">
      <div class="row" style="gap:1rem;align-items:center">
        <img src="images/logo.png" alt="Internalytics logo" width="64" height="64" style="border-radius:16px;box-shadow:var(--shadow-md)" />
        <div>
          <h1>Recruiting, decoded.</h1>
          <p>Analyze internship cycles, uncover timing patterns, and act with insight across Finance, Accounting, Consulting, and Real Estate.</p>
        </div>
      </div>
      <div class="actions">
        <a class="btn" href="#cycle-intelligence">See Timeline</a>
        <a class="btn secondary" href="radar.html">Explore Radar</a>
        <a class="btn ghost" href="account.html">Sign in</a>
      </div>
    </div>
  </section>

  <!-- Snapshot Analytics Bar -->
  <section class="section">
    <div class="container">
      <div class="analytics-bar" role="region" aria-label="Snapshot KPIs">
        <div class="kpi">
          <div class="value" id="kpi-open">42</div>
          <div class="label">Open applications now</div>
        </div>
        <div class="kpi">
          <div class="value" id="kpi-interview">18</div>
          <div class="label">Interview windows active</div>
        </div>
        <div class="kpi">
          <div class="value" id="kpi-offer">6</div>
          <div class="label">Offer waves this week</div>
        </div>
        <div class="kpi">
          <div class="value" id="kpi-updated">Today</div>
          <div class="label">Last data refresh</div>
        </div>
      </div>
    </div>
  </section>

<!-- Cycle Intelligence — Infinite Desktop Wheel -->
<section id="cycle-intelligence" class="section headroom">
  <div class="container">
    <div class="row" style="justify-content:space-between;align-items:center;">
      <h2 class="m-0">Cycle Intelligence — Infinite Timeline</h2>
      <div>
        <button id="prevBtn" class="btn ghost small">←</button>
        <button id="nextBtn" class="btn ghost small">→</button>
      </div>
    </div>
    <p class="caption mt-2">Scroll or drag to explore months. The calendar loops infinitely.</p>

    <div class="calendar-wrapper" id="calendarWrapper">
      <div class="calendar-header">
        <div class="discipline-label-header">Discipline</div>
        <div class="calendar-month-header" id="monthHeader"></div>
      </div>
      <div class="calendar-body" id="calendarBody"></div>
      <div class="today-line" id="todayLine"></div>
    </div>
  </div>
</section>

<style>
.calendar-wrapper {
  position: relative;
  border: 1px solid #ddd;
  border-radius: 12px;
  overflow-x: scroll;
  overflow-y: hidden;
  scrollbar-width: none;
}
.calendar-wrapper::-webkit-scrollbar { display: none; }

.calendar-header {
  display: flex;
  border-bottom: 1px solid #ddd;
}
.discipline-label-header {
  flex: 0 0 160px;
  font-weight: 600;
  padding: 10px 12px;
  background: #fafafa;
  border-right: 1px solid #ddd;
  z-index: 5;
}
.calendar-month-header {
  display: grid;
  grid-template-columns: repeat(36, 1fr); /* 3 years worth of months for looping */
  flex: 1;
  text-align: center;
  font-weight: 600;
  background: #f7f7f7;
  padding: 10px 0;
  position: relative;
}
.calendar-body { position: relative; }

.calendar-row-wrapper {
  display: flex;
  align-items: center;
  border-bottom: 1px solid #eee;
}
.discipline-cell {
  flex: 0 0 160px;
  font-weight: 600;
  padding: 10px 12px;
  border-right: 1px solid #eee;
  background: #fafafa;
  z-index: 4;
}
.timeline-cell {
  flex: 1;
  position: relative;
  height: 42px;
  min-width: 2400px; /* wide track for smooth scroll */
}
.timeline-grid {
  display: grid;
  grid-template-columns: repeat(36, 1fr);
  height: 100%;
}
.highlight {
  position: absolute;
  height: 26px;
  background: rgba(0, 200, 0, 0.25);
  border-radius: 4px;
  top: 8px;
}
.today-line {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 2px;
  background: red;
  z-index: 10;
  pointer-events: none;
}
.calendar-wrapper.dragging { cursor: grabbing; }
</style>

<script>
const monthHeader = document.getElementById("monthHeader");
const calendarBody = document.getElementById("calendarBody");
const todayLine = document.getElementById("todayLine");
const wrapper = document.getElementById("calendarWrapper");

const MONTHS = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
const cycleRanges = [
  { discipline:"Finance",ranges:[{start:"2025-09-01",end:"2025-11-15"}]},
  { discipline:"Accounting",ranges:[{start:"2025-07-01",end:"2025-09-30"}]},
  { discipline:"Consulting",ranges:[{start:"2025-08-15",end:"2025-10-31"}]},
  { discipline:"Real Estate",ranges:[{start:"2025-09-10",end:"2025-12-05"}]}
];

// --- Render header and rows (3x months for looping illusion) ---
function renderCalendar() {
  monthHeader.innerHTML="";
  for(let i=0;i<36;i++){
    const cell=document.createElement("div");
    cell.textContent=MONTHS[i%12];
    monthHeader.appendChild(cell);
  }

  calendarBody.innerHTML="";
  const startOfYear=new Date(new Date().getFullYear(),0,1);
  const endOfYear=new Date(new Date().getFullYear(),11,31);
  const totalMs=endOfYear-startOfYear;

  cycleRanges.forEach(item=>{
    const row=document.createElement("div");
    row.className="calendar-row-wrapper";

    const label=document.createElement("div");
    label.className="discipline-cell";
    label.textContent=item.discipline;
    row.appendChild(label);

    const timeline=document.createElement("div");
    timeline.className="timeline-cell";
    const grid=document.createElement("div");
    grid.className="timeline-grid";
    timeline.appendChild(grid);

    item.ranges.forEach(r=>{
      const s=new Date(r.start);
      const e=new Date(r.end);
      const sRatio=(s-startOfYear)/totalMs;
      const eRatio=(e-startOfYear)/totalMs;
      for(let copy=0;copy<3;copy++){ // repeat thrice for looped illusion
        const h=document.createElement("div");
        h.className="highlight";
        h.style.left=`calc(${(sRatio*100 + copy*100)}%)`;
        h.style.width=`${(eRatio-sRatio)*100}%`;
        timeline.appendChild(h);
      }
    });

    row.appendChild(timeline);
    calendarBody.appendChild(row);
  });

  updateTodayLine();
}

// --- Accurate today line position ---
function updateTodayLine(){
  const now=new Date();
  const startOfYear=new Date(now.getFullYear(),0,1);
  const endOfYear=new Date(now.getFullYear(),11,31);
  const ratio=(now-startOfYear)/(endOfYear-startOfYear);
  const totalWidth=monthHeader.offsetWidth/3; // one-year width
  // offset by left label column
  todayLine.style.left=`${160 + ratio*totalWidth}px`;
}
setInterval(updateTodayLine,60000);

// --- Drag + Scroll combined ---
let isDown=false,startX,scrollLeft;
wrapper.addEventListener("mousedown",(e)=>{
  isDown=true;
  wrapper.classList.add("dragging");
  startX=e.pageX-wrapper.offsetLeft;
  scrollLeft=wrapper.scrollLeft;
});
wrapper.addEventListener("mouseup",()=>{isDown=false;wrapper.classList.remove("dragging");});
wrapper.addEventListener("mouseleave",()=>{isDown=false;wrapper.classList.remove("dragging");});
wrapper.addEventListener("mousemove",(e)=>{
  if(!isDown)return;
  e.preventDefault();
  const x=e.pageX-wrapper.offsetLeft;
  const walk=(x-startX);
  wrapper.scrollLeft=scrollLeft-walk;
});

// --- Wheel scroll for trackpads/mice ---
wrapper.addEventListener("wheel",(e)=>{
  if(Math.abs(e.deltaY)>Math.abs(e.deltaX)){ // vertical wheel moves horizontal
    e.preventDefault();
    wrapper.scrollLeft+=e.deltaY;
  }
},{passive:false});

// --- Infinite wrap illusion ---
function loopScroll(){
  const totalWidth=monthHeader.scrollWidth/3; // one "year" section width
  if(wrapper.scrollLeft < totalWidth*0.5){
    wrapper.scrollLeft += totalWidth;
  } else if(wrapper.scrollLeft > totalWidth*1.5){
    wrapper.scrollLeft -= totalWidth;
  }
  requestAnimationFrame(loopScroll);
}

// --- Arrow buttons ---
document.getElementById("prevBtn").addEventListener("click",()=>wrapper.scrollBy({left:-300,behavior:"smooth"}));
document.getElementById("nextBtn").addEventListener("click",()=>wrapper.scrollBy({left:300,behavior:"smooth"}));

// --- Init ---
renderCalendar();
wrapper.scrollLeft = wrapper.scrollWidth / 3; // center to mid-year copy
loopScroll();
</script>

  <!-- Profession Feature Grid -->
  <section class="section">
    <div class="container grid cols-4">
      <a class="card lift feature-card finance" href="radar.html?profession=finance">
        <div class="title">Finance</div>
        <div class="meta">IB, S&T, AM timelines</div>
      </a>
      <a class="card lift feature-card accounting" href="radar.html?profession=accounting">
        <div class="title">Accounting</div>
        <div class="meta">Assurance & Tax cycles</div>
      </a>
      <a class="card lift feature-card consulting" href="radar.html?profession=consulting">
        <div class="title">Consulting</div>
        <div class="meta">Strategy & Ops recruiting</div>
      </a>
      <a class="card lift feature-card realestate" href="radar.html?profession=realestate">
        <div class="title">Real Estate</div>
        <div class="meta">Investment & Dev tracks</div>
      </a>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container inner">
      <small>Built for students who think in data.</small>
      <small>© <span id="year"></span> Internalytics</small>
    </div>
  </footer>

  <!-- Minimal JS: JSON-driven CycleMap preview (MVP, static data) -->
  <script>
    // Example static JSON dataset for the preview (Phase 1 / MVP)
    const cycleData = [
      { role: "Finance — Bulge Bracket", phases: [
        { type: "open", start: 5, end: 25 },      // day-of-year percentages (0–100)
        { type: "interview", start: 26, end: 45 },
        { type: "offer", start: 46, end: 55 },
      ]},
      { role: "Accounting — Big 4", phases: [
        { type: "open", start: 10, end: 30 },
        { type: "interview", start: 34, end: 52 },
        { type: "offer", start: 58, end: 65 },
      ]},
      { role: "Consulting — MBB/Boutique", phases: [
        { type: "open", start: 15, end: 35 },
        { type: "interview", start: 40, end: 60 },
        { type: "offer", start: 64, end: 75 },
      ]},
      { role: "Real Estate — IM/Dev", phases: [
        { type: "open", start: 20, end: 38 },
        { type: "interview", start: 42, end: 58 },
        { type: "offer", start: 63, end: 72 },
      ]},
    ];

    const rowsHost = document.getElementById("cycle-rows");

    function renderCycleRows(data) {
      rowsHost.innerHTML = "";
      data.forEach(item => {
        const row = document.createElement("div");
        row.className = "row";
        const role = document.createElement("div");
        role.className = "role";
        role.textContent = item.role;
        const lane = document.createElement("div");
        lane.className = "lane";
        // add phases
        item.phases.forEach(p => {
          const el = document.createElement("div");
          el.className = "phase " + p.type;
          el.style.left = p.start + "%";
          el.style.width = (p.end - p.start) + "%";
          el.title = p.type.toUpperCase() + " • " + p.start + "%–" + p.end + "%";
          el.setAttribute("aria-label", el.title);
          lane.appendChild(el);
        });
        row.appendChild(role);
        row.appendChild(lane);
        rowsHost.appendChild(row);
      });
    }
    renderCycleRows(cycleData);

    // Year in footer
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
